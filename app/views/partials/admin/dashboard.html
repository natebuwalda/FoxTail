<div ng-include="'partials/navbar.html'"></div>
<style>
  label, input, button { margin: 1em; }
  .row { color: black; }
  a:hover { cursor: pointer; }
</style>
 
<div class="container dkblue r15" style="padding: 20px; ">
  <div class="row">
    <h1>Admin Dashboard</h1>
    <a ng-click="logout()" style="float: right;">Logout</a>

    <div class="panel panel-default">
      <div class="panel-heading">Database Control</div>
      <form>
        <div class="form-group">
          <label for="fileupload">Choose .CSV to update the database from:</label>
          <input id="fileupload" type="file" file-model="dataFile" /><p ng-show="{{processing}}">Processing...</p><img ng-show="{{processing}}" src="/images/loading.gif"/>
          <button ng-click="submitFile()" type="submit" class="btn btn-default">Submit</button>
        </div>
      </form>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">Website Control</div>
      <div class="panel-body">
        <a ng-click="updateWebsite()">Update Website from GitHub</a><p ng-show="{{processing}}">Updating...</p><img ng-show="{{updating}}" src="/images/loading.gif"/><br>
        <a ng-click="buildWebsite()">Rebuild Website (Production only)</a><p ng-show="{{rebuilding}}">Rebuilding...</p><img ng-show="{{rebuilding}}" src="/images/loading.gif"/><br>
        <a ng-click="stopWebsite()">Restart Website (Production only)<p ng-show="{{restarting}}">Restarting...</p><img ng-show="{{restarting}}" src="/images/loading.gif"/></a>
        <h3>{{message}}</h3>
        <textarea readonly ng-model="console" rows="10" cols="80"></textarea>
      </div>
    </div>
  </div>
</div>
